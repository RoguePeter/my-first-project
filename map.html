<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>OSINT Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { margin: 0; padding: 10px; text-align: center; font-family: 'Microsoft JhengHei', sans-serif; background-color: #fff; }
        /* åœ–ç‰‡æ¨£å¼ï¼šè‡ªé©æ‡‰å¯¬åº¦ï¼Œæœ€å¤§é«˜åº¦é™åˆ¶ï¼Œé¿å…ä½”æ»¿ç•«é¢ */
        img { max-width: 100%; height: auto; max-height: 350px; border: 1px solid #ccc; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        /* åœ°åœ–æ¨£å¼ */
        #map { width: 100%; height: 400px; border: 2px solid #333; margin: 15px 0; border-radius: 8px; }
        /* æ§åˆ¶å€æ¨£å¼ */
        .controls { margin-top: 10px; padding: 10px; background: #f9f9f9; border-radius: 8px; display: inline-block; }
        input { padding: 8px; width: 100px; margin: 2px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 8px 20px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 4px; font-weight: bold; }
        button:hover { background: #0056b3; }
        #res { margin-top: 10px; font-weight: bold; min-height: 25px; }
    </style>
</head>
<body>
    <P>è«‹å•å°èœæ˜¯ç•¶æ™‚æ‹ç…§æ™‚åœ¨å“ªè£¡?</P>
    <img src="https://raw.githubusercontent.com/RoguePeter/my-first-project/eb009a45eb8fd94c98349c28dccb24907f2cf8aa/%E8%B3%87%E5%AE%89%E6%AF%94%E8%B3%BD%E7%85%A7%E7%89%87_%E5%B0%8B%E6%89%BE%E6%B6%88%E5%A4%B1%E7%9A%84%E6%94%9D%E5%BD%B1%E5%B8%AB.jpg" alt="è«‹åˆ†æé€™å¼µç…§ç‰‡çš„åœ°é»">
    
    <div id='map'></div>
    
    <div class="controls">
        <p style="margin:0 0 10px 0; font-size:0.9em; color:#555;">åœ¨åœ°åœ–ä¸Šé»é¸ä½ç½®ï¼Œæˆ–ç›´æ¥è¼¸å…¥åº§æ¨™</p>
        <input type='text' id='lat' placeholder='25.xxxx'>
        <input type='text' id='lng' placeholder='121.xxxx'>
        <button onclick='check()'>é©—è­‰åœ°é»</button>
        <div id='res'></div>
    </div>

    <script>
        // åˆå§‹åŒ–åœ°åœ–ï¼šé è¨­ä¸­å¿ƒé»åœ¨å°åŒ—
        var m = L.map('map').setView([25.0478, 121.5170], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OSM contributors'
        }).addTo(m);

        var k;
        m.on('click', function(e){
            if(k) m.removeLayer(k);
            k = L.marker(e.latlng).addTo(m);
            document.getElementById('lat').value = e.latlng.lat.toFixed(4);
            document.getElementById('lng').value = e.latlng.lng.toFixed(4);
        });

        window.check = function(){
            var la = parseFloat(document.getElementById('lat').value);
            var ln = parseFloat(document.getElementById('lng').value);
            

            var tLa = 25.0523, tLn = 121.5440, R = 6371; 
            var dLa = (la-tLa)*Math.PI/180, dLn = (ln-tLn)*Math.PI/180;
            var a = Math.sin(dLa/2)*Math.sin(dLa/2) + Math.cos(tLa*Math.PI/180)*Math.cos(la*Math.PI/180)*Math.sin(dLn/2)*Math.sin(dLn/2);
            var c = 2*Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            var d = R*c;
            
            var r = document.getElementById('res');
            
            if(d <= 0.2){
                r.innerHTML = '<span style="color:green; font-size:1.2em; background:#d4edda; padding:5px 15px; border-radius:20px;">ğŸ‰ Flag: NHISC{NanJing_FuXing_Station_Found!}</span>';
            } else {
                r.innerHTML = '<span style="color:red; font-size:1.1em;">âŒ ä½ç½®éŒ¯èª¤ (Incorrect Location)</span>';
            }
        };
    </script>
</body>

</html>
